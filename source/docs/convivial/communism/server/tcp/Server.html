<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0) on Wed May 30 13:40:30 PDT 2012 -->
<title>Server</title>
<meta name="date" content="2012-05-30">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Server";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../convivial/communism/server/tcp/ServerConnection.html" title="class in convivial.communism.server.tcp"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?convivial/communism/server/tcp/Server.html" target="_top">Frames</a></li>
<li><a href="Server.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">convivial.communism.server.tcp</div>
<h2 title="Class Server" class="title">Class Server</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>convivial.communism.server.tcp.Server</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../convivial/communism/server/example/ChatServer.html" title="class in convivial.communism.server.example">ChatServer</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="strong">Server</span>
extends java.lang.Object</pre>
<div class="block">Runs a Server. This class is meant to be extended and run stand-alone. It consumes the thread that ran
                creates it, so don't create a Server and expect to keep on doing other tasks unless you build another
                thread to just run the server.
        
        <p>Server simplifies a TCP-based server, accepting connections, handling disconnections, and managing
                input received from connections to the server. This allows the subclass to simply override
                the few nessecary methods and be able to run a full server doing whatever you want with the
                the data being received and sending data out.</p>
        
        <p>For an example, see <code>convivial.communism.server.example.ChatServer</code> source.</p>
        
        <br>
        <h2>Import these:</h2>
        <code>
        import java.nio.channels.*;<br>
        import java.nio.ByteBuffer;
        </code>
        <br>
        <h2>Override these:</h2>
        <code>
        <ul>
        <li>protected void init()</li>
  <li>protected Object getAttachment()</li>
        <li>protected void newClient(SocketChannel channel) </li>
        <li>protected void disconnection(SocketChannel channel) </li>
        <li>protected void receiveData(SelectionKey key, SocketChannel channel, long bytesRead, ByteBuffer data) </li>
        <li>protected void receiveConsole(String input)</li>
        </ul>
        </code></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.nio.ByteBuffer</code></td>
<td class="colLast"><code><strong><a href="../../../../convivial/communism/server/tcp/Server.html#writeBuffer">writeBuffer</a></strong></code>
<div class="block">A ByteBuffer of size 255 bytes for use in any way the subclass wants.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../convivial/communism/server/tcp/Server.html#Server()">Server</a></strong>()</code>
<div class="block">Creates a new server that runs on port 10997.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../convivial/communism/server/tcp/Server.html#Server(java.net.InetAddress, int)">Server</a></strong>(java.net.InetAddress&nbsp;ip,
      int&nbsp;port)</code>
<div class="block">Starts up the server using the InetAddress and Port to receieve message from.</div>
</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../convivial/communism/server/tcp/Server.html#Server(int)">Server</a></strong>(int&nbsp;port)</code>
<div class="block">Creates a new server using the specified port number.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../convivial/communism/server/tcp/Server.html#Server(java.lang.String, int)">Server</a></strong>(java.lang.String&nbsp;ipName,
      int&nbsp;port)</code>
<div class="block">Creates a new server running on the specified IPAddress and Port number.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../convivial/communism/server/tcp/Server.html#channelWrite(java.nio.channels.SocketChannel, java.nio.ByteBuffer)">channelWrite</a></strong>(java.nio.channels.SocketChannel&nbsp;channel,
            java.nio.ByteBuffer&nbsp;writeBuffer)</code>
<div class="block">Writes out the passed ByteBuffer of data to the specified channel.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../convivial/communism/server/tcp/Server.html#closeChannel(java.nio.channels.SocketChannel)">closeChannel</a></strong>(java.nio.channels.SocketChannel&nbsp;channel)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected abstract void</code></td>
<td class="colLast"><code><strong><a href="../../../../convivial/communism/server/tcp/Server.html#disconnection(java.nio.channels.SocketChannel)">disconnection</a></strong>(java.nio.channels.SocketChannel&nbsp;channel)</code>
<div class="block">Manages a reaction to a client being disconnected.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected abstract java.lang.Object</code></td>
<td class="colLast"><code><strong><a href="../../../../convivial/communism/server/tcp/Server.html#getAttachment()">getAttachment</a></strong>()</code>
<div class="block">Returns the object to attach to a newly accepted channel.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected abstract void</code></td>
<td class="colLast"><code><strong><a href="../../../../convivial/communism/server/tcp/Server.html#init()">init</a></strong>()</code>
<div class="block">Handles initialization procedures needed by the sub-class.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected abstract void</code></td>
<td class="colLast"><code><strong><a href="../../../../convivial/communism/server/tcp/Server.html#newClient(java.nio.channels.SocketChannel)">newClient</a></strong>(java.nio.channels.SocketChannel&nbsp;channel)</code>
<div class="block">Manages a reaction to a new client being connected.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected abstract void</code></td>
<td class="colLast"><code><strong><a href="../../../../convivial/communism/server/tcp/Server.html#receiveConsole(java.lang.String)">receiveConsole</a></strong>(java.lang.String&nbsp;input)</code>
<div class="block">Handles commands being typed in from the console.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected abstract void</code></td>
<td class="colLast"><code><strong><a href="../../../../convivial/communism/server/tcp/Server.html#receiveData(java.nio.channels.SelectionKey, java.nio.channels.SocketChannel, long, java.nio.ByteBuffer)">receiveData</a></strong>(java.nio.channels.SelectionKey&nbsp;key,
           java.nio.channels.SocketChannel&nbsp;channel,
           long&nbsp;bytesRead,
           java.nio.ByteBuffer&nbsp;data)</code>
<div class="block">Manipulates data received by the server from some client.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../convivial/communism/server/tcp/Server.html#shutdown()">shutdown</a></strong>()</code>
<div class="block">Shuts the server down.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="writeBuffer">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>writeBuffer</h4>
<pre>protected&nbsp;java.nio.ByteBuffer writeBuffer</pre>
<div class="block">A ByteBuffer of size 255 bytes for use in any way the subclass wants.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Server()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Server</h4>
<pre>public&nbsp;Server()
       throws java.net.UnknownHostException</pre>
<div class="block">Creates a new server that runs on port 10997.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.net.UnknownHostException</code></dd></dl>
</li>
</ul>
<a name="Server(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Server</h4>
<pre>public&nbsp;Server(int&nbsp;port)
       throws java.net.UnknownHostException</pre>
<div class="block">Creates a new server using the specified port number.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>port</code> - Network port to run the server on.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.net.UnknownHostException</code></dd></dl>
</li>
</ul>
<a name="Server(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Server</h4>
<pre>public&nbsp;Server(java.lang.String&nbsp;ipName,
      int&nbsp;port)
       throws java.net.UnknownHostException</pre>
<div class="block">Creates a new server running on the specified IPAddress and Port number. This
                is a convienience method so subclasses won't have to import and handle
                the <code>java.net.IneAddress</code> class and can instead pass a simple
                string representing an Internet Address.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>ipName</code> - InternetAddress in a String format, like 10.0.0.8</dd><dd><code>port</code> - Port number to accept connections from.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.net.UnknownHostException</code> - if <code>java.net.InetAddress</code> doesn't like the passed <code>ipName</code>.</dd></dl>
</li>
</ul>
<a name="Server(java.net.InetAddress, int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Server</h4>
<pre>public&nbsp;Server(java.net.InetAddress&nbsp;ip,
      int&nbsp;port)</pre>
<div class="block">Starts up the server using the InetAddress and Port to receieve message from.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>ip</code> - Internet Address to run the server on.</dd><dd><code>port</code> - Port number to accept and expect messages from.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="init()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre>protected abstract&nbsp;void&nbsp;init()</pre>
<div class="block">Handles initialization procedures needed by the sub-class. Generally these calls
                would happen in the constructor, but this class is set up to never run past
                this server's constructor, so this method is needed.</div>
</li>
</ul>
<a name="getAttachment()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAttachment</h4>
<pre>protected abstract&nbsp;java.lang.Object&nbsp;getAttachment()</pre>
<div class="block">Returns the object to attach to a newly accepted channel. Each SelectionKey can have
                any object as an attachment, and this method gets called whenever a new acception
                is made to get the Object to attach to the new channel. Later on, in
                <code>receivedData(SelectionKey key, SocketChannel channel, long bytesRead, ByteBuffer data)</code>
                call <code>key.attachment();</code> to retrieve the attachment and then use it.
                It's a useful way to attach data to a particular channel (maybe like an incomplete message).
        
        <p>Generally, have this method return the object you want to be attached to each channel.</p></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>Object to attach to each channel.</dd></dl>
</li>
</ul>
<a name="newClient(java.nio.channels.SocketChannel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newClient</h4>
<pre>protected abstract&nbsp;void&nbsp;newClient(java.nio.channels.SocketChannel&nbsp;channel)</pre>
<div class="block">Manages a reaction to a new client being connected.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>channel</code> - The client that was just accepted by the server.</dd></dl>
</li>
</ul>
<a name="disconnection(java.nio.channels.SocketChannel)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disconnection</h4>
<pre>protected abstract&nbsp;void&nbsp;disconnection(java.nio.channels.SocketChannel&nbsp;channel)</pre>
<div class="block">Manages a reaction to a client being disconnected.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>channel</code> - Client who was just disconnected.</dd></dl>
</li>
</ul>
<a name="receiveData(java.nio.channels.SelectionKey, java.nio.channels.SocketChannel, long, java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receiveData</h4>
<pre>protected abstract&nbsp;void&nbsp;receiveData(java.nio.channels.SelectionKey&nbsp;key,
               java.nio.channels.SocketChannel&nbsp;channel,
               long&nbsp;bytesRead,
               java.nio.ByteBuffer&nbsp;data)</pre>
<div class="block">Manipulates data received by the server from some client. What the server does with
                this information/data depends on the server.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The client who sent the data.</dd><dd><code>channel</code> - Client's SocketChannel.</dd><dd><code>bytesRead</code> - Number of bytes read from the channel.</dd><dd><code>data</code> - Actual information that was sent.</dd></dl>
</li>
</ul>
<a name="receiveConsole(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receiveConsole</h4>
<pre>protected abstract&nbsp;void&nbsp;receiveConsole(java.lang.String&nbsp;input)</pre>
<div class="block">Handles commands being typed in from the console. Implement commands
                for the server here, generally at least one command that will
                will shutdown the server (via a call to <code>shutdown()</code>).</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>input</code> - Message typed into the server's console.</dd></dl>
</li>
</ul>
<a name="shutdown()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdown</h4>
<pre>protected&nbsp;void&nbsp;shutdown()</pre>
<div class="block">Shuts the server down.</div>
</li>
</ul>
<a name="channelWrite(java.nio.channels.SocketChannel, java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>channelWrite</h4>
<pre>protected&nbsp;void&nbsp;channelWrite(java.nio.channels.SocketChannel&nbsp;channel,
                java.nio.ByteBuffer&nbsp;writeBuffer)</pre>
<div class="block">Writes out the passed ByteBuffer of data to the specified channel.
                Make sure to call <code>flip()</code> on the writeBuffer before calling
                this method.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>channel</code> - Client to send data to.</dd><dd><code>writeBuffer</code> - Data to send.</dd></dl>
</li>
</ul>
<a name="closeChannel(java.nio.channels.SocketChannel)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>closeChannel</h4>
<pre>protected&nbsp;void&nbsp;closeChannel(java.nio.channels.SocketChannel&nbsp;channel)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../convivial/communism/server/tcp/ServerConnection.html" title="class in convivial.communism.server.tcp"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?convivial/communism/server/tcp/Server.html" target="_top">Frames</a></li>
<li><a href="Server.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
